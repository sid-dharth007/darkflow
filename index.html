<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PDF Mania | Client-Side PDF Tools</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
body{font-family:Arial;background:#0b0b0f;color:#fff;margin:0}
.container{max-width:1100px;margin:auto;padding:20px}
.logo{font-size:26px;font-weight:bold;margin-bottom:20px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}
.card{background:#16161c;padding:20px;border-radius:10px;text-align:center;cursor:pointer;border:1px solid #2a2a2a}
.card:hover{border-color:#8b5cf6}
.card i{font-size:26px;color:#8b5cf6}
#workspace{display:none;margin-top:20px}
.drop{border:2px dashed #333;padding:40px;text-align:center;border-radius:10px;cursor:pointer}
button{margin-top:10px;padding:10px 20px;background:#8b5cf6;border:none;color:white;border-radius:6px;cursor:pointer}
input{padding:8px;margin-top:10px}
.result{display:none;margin-top:15px}
input[type=file]{display:none}
</style>
</head>
<body>

<div class="container">
<div class="logo">PDF Mania</div>

<div id="main">
<div class="grid">

<div class="card" onclick="openTool('merge')"><i class="fa fa-object-group"></i><p>Merge</p></div>
<div class="card" onclick="openTool('split')"><i class="fa fa-scissors"></i><p>Split</p></div>
<div class="card" onclick="openTool('extract')"><i class="fa fa-file"></i><p>Extract Pages</p></div>
<div class="card" onclick="openTool('rotate')"><i class="fa fa-rotate"></i><p>Rotate</p></div>
<div class="card" onclick="openTool('img2pdf')"><i class="fa fa-image"></i><p>Image to PDF</p></div>
<div class="card" onclick="openTool('pdf2img')"><i class="fa fa-file-export"></i><p>PDF to Images</p></div>
<div class="card" onclick="openTool('compress')"><i class="fa fa-file-zipper"></i><p>Compress</p></div>
<div class="card" onclick="openTool('lock')"><i class="fa fa-lock"></i><p>Lock</p></div>
<div class="card" onclick="openTool('unlock')"><i class="fa fa-unlock"></i><p>Unlock</p></div>
<div class="card" onclick="openTool('watermark')"><i class="fa fa-stamp"></i><p>Watermark</p></div>
<div class="card" onclick="openTool('info')"><i class="fa fa-circle-info"></i><p>File Info</p></div>

</div>
</div>

<div id="workspace">
<h2 id="title"></h2>
<button onclick="back()">Back</button>

<div class="drop" id="drop">
Click or Drop Files
<input type="file" id="fileInput" multiple>
</div>

<div id="rangeBox" style="display:none">
<input id="rangeInput" placeholder="Pages (example: 1-3)">
</div>

<div id="textBox" style="display:none">
<input id="textInput" placeholder="Enter watermark text">
</div>

<div id="passBox" style="display:none">
<input type="password" id="passInput" placeholder="Password">
</div>

<button id="processBtn" disabled>Process</button>

<div id="info"></div>

<div class="result" id="result">
<a id="download" download>Download</a>
</div>
</div>
</div>

<script>
const { PDFDocument, StandardFonts, rgb, degrees } = PDFLib;
let tool="", files=[];

function openTool(t){
tool=t;
document.getElementById("main").style.display="none";
document.getElementById("workspace").style.display="block";
document.getElementById("title").innerText=t.toUpperCase();

document.getElementById("rangeBox").style.display=
(t==="split"||t==="extract")?"block":"none";

document.getElementById("textBox").style.display=
(t==="watermark")?"block":"none";

document.getElementById("passBox").style.display=
(t==="lock")?"block":"none";
}

function back(){
files=[];
document.getElementById("workspace").style.display="none";
document.getElementById("main").style.display="block";
document.getElementById("processBtn").disabled=true;
document.getElementById("result").style.display="none";
}

const input=document.getElementById("fileInput");
const drop=document.getElementById("drop");

drop.onclick=()=>input.click();
input.onchange=e=>{files=[...e.target.files];document.getElementById("processBtn").disabled=false;showInfo();}
drop.ondrop=e=>{e.preventDefault();files=[...e.dataTransfer.files];document.getElementById("processBtn").disabled=false;showInfo();}
drop.ondragover=e=>e.preventDefault();

function showInfo(){
let t="";
files.forEach(f=>t+=f.name+" - "+(f.size/1024).toFixed(1)+" KB<br>");
document.getElementById("info").innerHTML=t;
}

document.getElementById("processBtn").onclick=async()=>{
if(tool==="merge") merge();
if(tool==="split") split();
if(tool==="extract") extract();
if(tool==="rotate") rotate();
if(tool==="img2pdf") img2pdf();
if(tool==="pdf2img") pdf2img();
if(tool==="compress") compress();
if(tool==="lock") lock();
if(tool==="unlock") unlock();
if(tool==="watermark") watermark();
if(tool==="info") showInfo();
};

// Merge
async function merge(){
const merged=await PDFDocument.create();
for(const f of files){
const pdf=await PDFDocument.load(await f.arrayBuffer());
const pages=await merged.copyPages(pdf,pdf.getPageIndices());
pages.forEach(p=>merged.addPage(p));
}
download(await merged.save(),"merged.pdf");
}

// Split / Extract
async function split(){
const [s,e]=document.getElementById("rangeInput").value.split("-").map(n=>parseInt(n)-1);
const pdf=await PDFDocument.load(await files[0].arrayBuffer());
const newPdf=await PDFDocument.create();
const pages=await newPdf.copyPages(pdf,[...Array(e-s+1).keys()].map(i=>i+s));
pages.forEach(p=>newPdf.addPage(p));
download(await newPdf.save(),"pages.pdf");
}
const extract=split;

// Rotate
async function rotate(){
const pdf=await PDFDocument.load(await files[0].arrayBuffer());
pdf.getPages().forEach(p=>p.setRotation(degrees(90)));
download(await pdf.save(),"rotated.pdf");
}

// Image → PDF
async function img2pdf(){
const pdf=await PDFDocument.create();
for(const f of files){
const imgBytes=await f.arrayBuffer();
const img=f.type.includes("png")?await pdf.embedPng(imgBytes):await pdf.embedJpg(imgBytes);
const page=pdf.addPage([img.width,img.height]);
page.drawImage(img,{x:0,y:0,width:img.width,height:img.height});
}
download(await pdf.save(),"images.pdf");
}

// PDF → Images
async function pdf2img(){
const pdf=await pdfjsLib.getDocument(URL.createObjectURL(files[0])).promise;
for(let i=1;i<=pdf.numPages;i++){
const page=await pdf.getPage(i);
const viewport=page.getViewport({scale:2});
const canvas=document.createElement("canvas");
canvas.width=viewport.width;canvas.height=viewport.height;
await page.render({canvasContext:canvas.getContext("2d"),viewport}).promise;
canvas.toBlob(b=>download(b,"page"+i+".png"));
}
}

// Compress
async function compress(){
const pdf=await PDFDocument.load(await files[0].arrayBuffer());
download(await pdf.save({useObjectStreams:true}),"compressed.pdf");
}

// Lock
async function lock(){
const pass=document.getElementById("passInput").value;
const pdf=await PDFDocument.load(await files[0].arrayBuffer());
download(await pdf.save({userPassword:pass,ownerPassword:pass}),"locked.pdf");
}

// Unlock
async function unlock(){
const pdf=await PDFDocument.load(await files[0].arrayBuffer(),{ignoreEncryption:true});
download(await pdf.save(),"unlocked.pdf");
}

// Watermark
async function watermark(){
const text=document.getElementById("textInput").value;
const pdf=await PDFDocument.load(await files[0].arrayBuffer());
const font=await pdf.embedFont(StandardFonts.Helvetica);
pdf.getPages().forEach(p=>{
p.drawText(text,{x:50,y:50,size:40,font,color:rgb(0.7,0.7,0.7),rotate:degrees(45)});
});
download(await pdf.save(),"watermarked.pdf");
}

// Download helper
function download(data,name){
const blob=new Blob([data]);
const url=URL.createObjectURL(blob);
const a=document.getElementById("download");
a.href=url;a.download=name;
document.getElementById("result").style.display="block";
}
</script>
  <footer style="text-align:center; margin-top:40px; padding:20px; border-top:1px solid #27272a;">
<a href="privacy.html">Privacy Policy</a> |
<a href="terms.html">Terms</a> |
</footer>
</body>
</html>

